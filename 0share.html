<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="icon" href="logo/favicon.ico" type="image/vnd.microsoft.icon">
<title>0install: 0share</title>
</head>
<body><table>
<tr>
<td class="logo"><a href="/"><img src="logo/zeroinstall-icon.png" width="96" height="95" alt="logo"></a></td>
<td class="header">
<form id="searchbox_010445122533180311286:4ee7gv0f1pc" action="http://google.com/cse" style="float: right; padding-right: 1em;"><p><input type="hidden" name="cx" value="010445122533180311286:4ee7gv0f1pc"><input name="q" type="search" size="14"><input type="submit" name="sa" value="Search"><input type="hidden" name="cof" value="FORID:0"></p></form>
<h1><a href="/">Zero Install</a></h1>
<p class="tagline">the antidote to app-stores</p>
</td>
</tr>
<tr>
<td class="sidebar"><ul class="pages">
<li class="open">
<a href=".">Overview 
      </a><ul>
<li class="closed"><a href="why.html">About 0install 
      </a></li>
<li class="closed"><a href="features.html">Features 
      </a></li>
</ul>
</li>
<li class="open">
<a href="news.html">News 
      </a><ul>
<li class="leaf"><a href="0install-2.0.html">0install 2.0 
      </a></li>
<li class="leaf"><a href="roadmap.html">Roadmap 
      </a></li>
</ul>
</li>
<li class="open">
<a href="injector.html">Download 0install 
      </a><ul>
<li class="leaf"><a href="install-linux.html">Linux 
      </a></li>
<li class="closed"><a href="install-osx.html">OS X 
      </a></li>
<li class="closed"><a href="install-source.html">Source code 
      </a></li>
<li class="leaf"><a href="install-unix.html">Unix 
      </a></li>
<li class="leaf"><a href="install-windows.html">Windows 
      </a></li>
</ul>
</li>
<li class="leaf"><a href="injector-feeds.html">Featured apps 
      </a></li>
<li class="open">
<a href="doc.html">Documentation 
      </a><ul>
<li class="closed"><a href="users.html">For users 
      </a></li>
<li class="closed"><a href="packagers.html">For packagers 
      </a></li>
<li class="closed"><a href="dev.html">For developers 
      </a></li>
<li class="open">
<a href="tools.html">Tool reference 
      </a><ul>
<li class="leaf"><a href="0bootstrap.html">0bootstrap 
      </a></li>
<li class="closed"><a href="0compile.html">0compile 
      </a></li>
<li class="leaf"><a href="ebox.html">ebox 
      </a></li>
<li class="leaf"><a href="0export.html">0export 
      </a></li>
<li class="leaf"><a href="feedlint.html">FeedLint 
      </a></li>
<li class="leaf"><a href="make-headers.html">Make-headers 
      </a></li>
<li class="leaf"><a href="0mirror.html">0mirror 
      </a></li>
<li class="leaf"><a href="pkg2zero.html">pkg2zero 
      </a></li>
<li class="leaf"><a href="0publish.html">0publish 
      </a></li>
<li class="closed"><a href="0release.html">0release 
      </a></li>
<li class="leaf"><a href="0share.html" class="selected">0share 
      </a></li>
<li class="leaf"><a href="0template.html">0template 
      </a></li>
<li class="leaf"><a href="0repo.html">0repo 
      </a></li>
<li class="leaf"><a href="0test.html">0test 
      </a></li>
</ul>
</li>
<li class="closed"><a href="injector-specs.html">Specifications 
      </a></li>
</ul>
</li>
<li class="open">
<a href="support.html">Support 
      </a><ul>
<li class="leaf"><a href="support.html#lists">Mailing lists 
      </a></li>
<li class="leaf"><a href="support.html#bugs">Bug tracker 
      </a></li>
<li class="leaf"><a href="faq.html">FAQ 
      </a></li>
<li class="leaf"><a href="injector-trouble.html">Troubleshooting 
      </a></li>
<li class="leaf"><a href="support.html#commercial">Commercial 
      </a></li>
</ul>
</li>
<li class="leaf"><a href="legal.html">Legal issues 
      </a></li>
<li class="leaf"><a href="https://github.com/0install">GitHub 
      </a></li>
<li class="leaf"><a href="http://sourceforge.net/project/showfiles.php?group_id=76468">SF file releases 
      </a></li>
</ul></td>
<td class="main">
<div class="main">

<table><tr>
<td style="vertical-align: top">
<h2>0share</h2>

<p>
0share provides for local peer-to-peer distribution of Zero Install implementations (versions of programs).
This means that once one machine on your local network has downloaded something, other machines can get
it directly from the first one.
</p>
</td>
<td style="vertical-align: top"><div class="program"><table>
<tr>
<th>Name</th>
<td>0share</td>
</tr>
<tr>
<th>Maintainer</th>
<td>Thomas Leonard</td>
</tr>
<tr>
<th>License</th>
<td>GNU General Public License</td>
</tr>
<tr>
<th>Run it</th>
<td><a href="http://0install.net/2008/interfaces/0share.xml">Zero Install feed</a></td>
</tr>
<tr>
<th>SCM</th>
<td><a href="http://repo.or.cz/w/0share.git">GIT repository</a></td>
</tr>
</table></div></td>
</tr></table>

<div class="note">
  <strong>This program is an experimental proof-of-concept.</strong> It currently requires a modified version of 0install, which can be found in the <a href="https://github.com/0install/0install/tree/peer2peer">peer2peer</a> branch. This branch is now very out-of-date. If you'd like to take over this project, please <a href="support.html">get in touch</a>!
</div>

<p class="diagram">
  <img src="screens/p2p.png" width="722" height="329" alt="Screenshot">
</p>

<h2 id="idm20530125775312">Testing</h2>

<p>
To try it out, run this command on one machine:
</p>

<table class="fixed"><td><pre>machine1 $ <b>0launch http://0install.net/2008/interfaces/0share.xml</b>
INFO:root:0share started and listening for requests...
INFO:root:Serving implementations from Store '/home/me/.cache/0install.net/implementations'
INFO:root:Serving implementations from Store '/var/cache/0install.net/implementations'
</pre></td></table>

<p>
On another machine on the same network, run this command, replacing <b>DIGEST</b> with the digest
of a program installed on the first machine (e.g. the name of a subdirectory of
/var/cache/0install.net/implementations/). The digest will be in the program's feed file.
</p>

<table class="fixed"><td><pre>machine2 $ <b>0launch http://0install.net/2008/interfaces/0share.xml -f DIGEST</b>
</pre></td></table>

<p>
The second machine will broadcast a request (to UDP port 38339) to see if anyone has the
given implementation. The first machine should respond. The second machine will then fetch it
from the first:
</p>

<table class="fixed"><td><pre>machine2 $ <b>./0share -f sha1new=84e37424bbb87a077e25cec87d3c668f12726817</b>
INFO:root:Broadcasting query for ['sha1new=84e37424bbb87a077e25cec87d3c668f12726817'] on local network...
192.168.2.1 has sha1new=84e37424bbb87a077e25cec87d3c668f12726817
INFO:root:Connecting to 192.168.2.1 to request sha1new=84e37424bbb87a077e25cec87d3c668f12726817
INFO:root:Caching new implementation (digest sha1new=84e37424bbb87a077e25cec87d3c668f12726817)
Success</pre></td></table>

<p>
The requested version should now be in machine2's cache. On the source machine, you should see something like:
</p>

<table class="fixed"><td><pre>INFO:root:Request from ('192.168.2.2', 53182): '0share\nsha1new=84e37424bbb87a077e25cec87d3c668f12726817'
INFO:root:Yes, we have sha1new=84e37424bbb87a077e25cec87d3c668f12726817
INFO:root:Sending reply...
INFO:root:GET /implementation/sha1new=84e37424bbb87a077e25cec87d3c668f12726817
machine2 - - [13/Dec/2008 21:52:49] "GET /implementation/sha1new=84e37424bbb87a077e25cec87d3c668f12726817 HTTP/1.1" 200 -
</pre></td></table>

<h2 id="idm20530125768240">Debugging</h2>

<p>
If it doesn't work:
</p>

<ul>
 <li>Check that your firewall allows TCP and UDP connections to port 38339 on the first machine.</li>
 <li>Try using -H on the second machine to give the hostname of the first machine explicitly.</li>
 <li>If you get "Network is unreachable", you may be missing a default route (see "ip route").</li>
</ul>

<h2 id="idm20530125765600">Realistic configuration</h2>

<p>
Before you start, you should <a href="sharing.html">enable sharing</a> on all
machines. This ensures that implementations all go in the single machine-wide
shared cache (/var/cache/0install.net/implementations/).
</p>

<p>
You'll probably want to run 0share without write access anywhere (for security), so
create a new user for that and try running it:
</p>

<table class="fixed"><td><pre>$ <b>sudo adduser --system zeroshare</b>
$ <b>sudo su zeroshare -s /usr/bin/env -- 0launch -vc http://0install.net/2008/interfaces/0share.xml</b></pre></td></table>

<p>
You can then add a line to your crontab file to make it start on boot:
</p>

<table class="fixed"><td><pre>
@reboot zeroshare 0launch -vc http://0install.net/2008/interfaces/0share.xml 2&gt;&amp;1 &gt;/dev/null
</pre></td></table>

<h2 id="idm20530125761200">Using with 0launch</h2>

<p>
As this is experimental, you'll need to use the <a href="https://github.com/0install/0install/tree/peer2peer">peer2peer branch</a> of 0install.
In that branch, P2P support is turned on when using the GUI for downloads.
</p>

</div>
<div class="footer">
<p>
	    Web-site © Copyright 2003-2015 Thomas Leonard and others<br></p>
<p>
	    Permission is granted to use the site (excluding the software,
	    which is licensed separately)<br>in accordance with the terms of the
	    <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative
	    Commons Attribution-ShareAlike 2.5 license</a>.
	  </p>
<p>
	    Some of the icons are from (or based on icons from) the
	    <a href="http://tango.freedesktop.org/Tango_Desktop_Project">Tango Desktop Project</a> and the <a href="http://www.openclipart.org/">Open Clipart Library</a>.
	  </p>
<span class="logos"><a href="http://creativecommons.org/licenses/by-sa/2.5/"><img src="http://creativecommons.org/images/public/somerights20.gif" alt="Attribution-ShareAlike" width="88" height="31"></a></span>
</div>
</td>
</tr>
</table></body>
</html>
