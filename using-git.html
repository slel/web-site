<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" type="text/css" href="style.css">
<link rel="icon" href="logo/favicon.ico" type="image/vnd.microsoft.icon">
<title>0install: Using Git</title>
</head>
<body><table>
<tr>
<td class="logo"><a href="/"><img src="logo/zeroinstall-icon.png" width="96" height="95" alt="logo"></a></td>
<td class="header">
<form id="searchbox_010445122533180311286:4ee7gv0f1pc" action="http://google.com/cse" style="float: right; padding-right: 1em;"><p><input type="hidden" name="cx" value="010445122533180311286:4ee7gv0f1pc"><input name="q" type="search" size="14"><input type="submit" name="sa" value="Search"><input type="hidden" name="cof" value="FORID:0"></p></form>
<h1><a href="/">Zero Install</a></h1>
<p class="tagline">the antidote to app-stores</p>
</td>
</tr>
<tr>
<td class="sidebar"><ul class="pages">
<li class="open">
<a href=".">Overview 
      </a><ul>
<li class="closed"><a href="why.html">About 0install 
      </a></li>
<li class="closed"><a href="features.html">Features 
      </a></li>
</ul>
</li>
<li class="open">
<a href="news.html">News 
      </a><ul>
<li class="leaf"><a href="0install-2.0.html">0install 2.0 
      </a></li>
<li class="leaf"><a href="roadmap.html">Roadmap 
      </a></li>
</ul>
</li>
<li class="open">
<a href="injector.html">Download 0install 
      </a><ul>
<li class="leaf"><a href="install-linux.html">Linux 
      </a></li>
<li class="closed"><a href="install-osx.html">OS X 
      </a></li>
<li class="closed"><a href="install-source.html">Source code 
      </a></li>
<li class="leaf"><a href="install-unix.html">Unix 
      </a></li>
<li class="leaf"><a href="install-windows.html">Windows 
      </a></li>
</ul>
</li>
<li class="leaf"><a href="injector-feeds.html">Featured apps 
      </a></li>
<li class="open">
<a href="doc.html">Documentation 
      </a><ul>
<li class="closed"><a href="users.html">For users 
      </a></li>
<li class="closed"><a href="packagers.html">For packagers 
      </a></li>
<li class="open">
<a href="dev.html">For developers 
      </a><ul>
<li class="leaf"><a href="get-involved.html">Get involved 
      </a></li>
<li class="leaf"><a href="using-git.html" class="selected">Using Git 
      </a></li>
<li class="leaf"><a href="injector-design.html">Design 
      </a></li>
<li class="leaf"><a href="solver.html">The Solver 
      </a></li>
<li class="leaf"><a href="json-api.html">JSON API 
      </a></li>
<li class="leaf"><a href="python-api/html/index.html">Python API 
      </a></li>
<li class="leaf"><a href="api-example.html">API example 
      </a></li>
<li class="leaf"><a href="dev-site.html">The web-site 
      </a></li>
</ul>
</li>
<li class="closed"><a href="tools.html">Tool reference 
      </a></li>
<li class="closed"><a href="injector-specs.html">Specifications 
      </a></li>
</ul>
</li>
<li class="open">
<a href="support.html">Support 
      </a><ul>
<li class="leaf"><a href="support.html#lists">Mailing lists 
      </a></li>
<li class="leaf"><a href="support.html#bugs">Bug tracker 
      </a></li>
<li class="leaf"><a href="faq.html">FAQ 
      </a></li>
<li class="leaf"><a href="injector-trouble.html">Troubleshooting 
      </a></li>
<li class="leaf"><a href="support.html#commercial">Commercial 
      </a></li>
</ul>
</li>
<li class="leaf"><a href="legal.html">Legal issues 
      </a></li>
<li class="leaf"><a href="https://github.com/0install">GitHub 
      </a></li>
<li class="leaf"><a href="http://sourceforge.net/project/showfiles.php?group_id=76468">SF file releases 
      </a></li>
</ul></td>
<td class="main">
<div class="main">

<ol class="toc">
<li><a href="#idm30675740961392">Testing developer versions using Git</a></li>
<li><a href="#idm30675740953216">Fetching updates</a></li>
<li><a href="#idm30675740950432">Understanding the code</a></li>
<li><a href="#idm30675740944608">Making patches</a></li>
<li><a href="#idm30675740939504">Making a new translation</a></li>
</ol>

<h2 id="idm30675740961392">Testing developer versions using Git</h2>

<p>
If you want to work on the code, or test a fix that has just been made,
you'll want to get the latest developer version. We use Git for version
control, so make sure you have that. You'll also need '<a href="http://www.gnu.org/software/gettext/">gettext-tools</a>' to build
the translations.
</p>

<p>
To install these on Ubuntu, open a terminal emulator and run this command:
</p>

<pre>$ sudo apt-get install git gitk gettext</pre>

<p>(gitk is a largish visualisation tool and is not strictly necessary, but highly recommended)</p>

<p>Click on the <b>SCM</b> link on any program's page to see its Git page
(for example, <a href="https://github.com/0install/0install">0install.git</a> for 0install itself).
The link for cloning is displayed there; use it like this:</p>

<pre>
$ git clone https://github.com/0install/0install.git
$ cd 0install
</pre>

<p>
The directory contains the latest version, plus a single (hidden) .git
directory with all the git-related bits.
</p>

<p>To see the log:</p>

<pre>
$ git log
</pre>

<p>
This doesn't require network access; your clone has the whole history.
</p>

<p>
To view a visualisation of the history:
</p>

<pre>
$ gitk --all
</pre>

<p>(--all shows the history of all branches and tags, not just the main trunk)</p>

<h2 id="idm30675740953216">Fetching updates</h2>

<p>To download the latest updates into your copy:</p>

<pre>
$ git pull --rebase
</pre>

<p>
(The --rebase option says that if you've committed some changes locally, they should be
reapplied on top of the latest version. Otherwise, it would create a merge commit, which
is usually not what you want.)
</p>

<p>
You can also pull from other places. If someone posts to the mailing list,
they will tell you where to pull from to try the feature out. If they send
a patch, you can apply it with:
</p>

<pre>$ git am the.patch</pre>

<h2 id="idm30675740950432">Understanding the code</h2>

<p>
  Most modules have two files - a <tt>.ml</tt> file containing the implementation and a <tt>.mli</tt>
  file describing the module's public interface. You should always start by reading the <tt>.mli</tt>
  file. <a href="https://github.com/0install/0install/blob/master/ocaml/zeroinstall/sigs.mli">sigs.mli</a> describes several abstract interfaces used in the code.
</p>

<p>
  <a href="http://roscidus.com/blog/blog/archives/">Thomas Leonard's blog</a>
  has many blog posts describing various aspects of 0install.
  For example, <a href="http://roscidus.com/blog/blog/2014/09/17/simplifying-the-solver-with-functors/">Simplifying the Solver With Functors</a> explains how 0install chooses a compatible set of libraries to run a program, while <a href="http://roscidus.com/blog/blog/2013/11/28/asynchronous-python-vs-ocaml/">Asynchronous Python vs OCaml</a> describes the code for downloading things.
</p>

<h2 id="idm30675740944608">Making patches</h2>

<p>
If you've changed the code in some way then you can commit the changes like
this (this just stores them on your own computer, in the .git sub-directory).
</p>

<pre>$ git commit -a</pre>

<p>Enter a log message. The first line should be a short summary (like the
subject of an email). Then leave a blank line, then write a longer description.
</p>

<p>To view your patch after committing:</p>

<pre>$ git show</pre>

<p>If you realised you made a mistake, correct it and then do:</p>

<pre>$ git commit -a --amend</pre>

<p>
Finally, to make a patch file ready to send to the <a href="support.html">mailing list</a>:
</p>

<pre>$ git format-patch origin/master</pre>

<h2 id="idm30675740939504">Making a new translation</h2>

<p>
  Note: translations are not currently working - see <a href="http://stackoverflow.com/questions/26192129/gettext-support-in-ocaml">Gettext support in OCaml</a>.
</p>

<p>Note: if you prefer, you can also use the <a href="https://www.transifex.net/projects/p/0install/">Transifex web interface</a> to work on translations.
</p>

<p>The steps are:</p>

<ol>
  <li>Create the .pot (.po template) file.</li>
  <li>Create a new directory <b>share/locale/<i>$locale</i>/LC_MESSAGES</b> inside the Git checkout.</li>
  <li>Copy the .pot file inside it with a .po extension.</li>
</ol>

<p>
  e.g. to make a French translation:
</p>

<pre>
  $ make share/locale/zero-install.pot
  $ mkdir -p share/locale/<b>fr</b>/LC_MESSAGES
  $ cp share/locale/zero-install.pot share/locale/<b>fr</b>/LC_MESSAGES/zero-install.po
</pre>

<p>
  Then edit the .po file to give a translation for each string. When you're done, create the .mo
  file from the .po file and test:
</p>

<pre>
  $ make translations
  $ ./0launch
</pre>

<p>
  Finally, <a href="support.html">send us</a> the new .po file.
</p>

</div>
<div class="footer">
<p>
	    Web-site © Copyright 2003-2015 Thomas Leonard and others<br></p>
<p>
	    Permission is granted to use the site (excluding the software,
	    which is licensed separately)<br>in accordance with the terms of the
	    <a href="http://creativecommons.org/licenses/by-sa/2.5/">Creative
	    Commons Attribution-ShareAlike 2.5 license</a>.
	  </p>
<p>
	    Some of the icons are from (or based on icons from) the
	    <a href="http://tango.freedesktop.org/Tango_Desktop_Project">Tango Desktop Project</a> and the <a href="http://www.openclipart.org/">Open Clipart Library</a>.
	  </p>
<span class="logos"><a href="http://creativecommons.org/licenses/by-sa/2.5/"><img src="http://creativecommons.org/images/public/somerights20.gif" alt="Attribution-ShareAlike" width="88" height="31"></a></span>
</div>
</td>
</tr>
</table></body>
</html>
